(this.webpackJsonpbeejee=this.webpackJsonpbeejee||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),c=a.n(r),l=(a(25),a(8)),o=a(2),i=a(3),m=a(4),u=a(6),p=a(5),d=a(7),h=a(9),g=a.n(h),f=(a(43),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={text:a.props.task.text,status:a.props.task.status,id:a.props.task.id},a.handleInputChange=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(o.a)({},t,n))},a.handleEditSuccess=function(e){e.preventDefault(),a.props.onEditSuccess(a.state)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.task;return s.a.createElement("li",{key:e.id,className:"m-2"},s.a.createElement("div",{className:"card",style:{width:"18rem"}},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title"},e.username),s.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},e.email),s.a.createElement("form",{onSubmit:this.handleEditSuccess},""===this.props.isLogged?s.a.createElement("p",{className:"card-text"},e.text):s.a.createElement("input",{type:"text",onChange:this.handleInputChange,name:"text",value:this.state.text}),""===this.props.isLogged?s.a.createElement("div",null,0===e.status?s.a.createElement("p",{style:{color:"red"}},"In progress"):s.a.createElement("p",{style:{color:"green"}},"Done")):s.a.createElement("label",null,"Task completed",s.a.createElement("input",{type:"checkbox",className:"ml-2",onChange:this.handleInputChange,name:"status",checked:10===this.state.status})),""!==this.props.isLogged?s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-primary mt-2"},"Edit")," "):null))))}}]),t}(n.Component)),v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).handleSubmit=function(e){a.props.updateTask(e)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:"d-flex justify-content-around"},this.props.tasks.map((function(t){return s.a.createElement(f,Object.assign({key:t.id,task:t},e.props,{handleInputChange:e.handleInputChange,onEditSuccess:e.handleSubmit}))})))}}]),t}(n.Component),b=function(e){return s.a.createElement("nav",{className:"d-flex justify-content-center"},s.a.createElement("ul",{className:"pagination pagination-sm"},function(e,t,a){for(var n=[],r=function(e){var r=t===e?"page-item disabled":"page-item";n.push(s.a.createElement("li",{className:r,key:e},s.a.createElement("button",{className:"page-link",onClick:function(){return a(e)}},e)))},c=1;c<=Math.ceil(e/3);c+=1)r(c);return n}(e.total_task_count,e.page,e.pickPage)))},k={username:"",email:"",text:""},E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state=Object(l.a)({},k),a.handleInputChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(o.a)({},t,n))},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.username||!a.state.text||""!==a.state.email){var t=a.state,n=t.username,s=t.email,r=t.text;a.props.createNewTask({username:n,email:s,text:r}),a.setState(Object(l.a)({},k))}},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"card m-4 p-4",onSubmit:this.handleSubmit},s.a.createElement("h2",null,"Create New Task"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"m-2"},"username",s.a.createElement("input",{onChange:this.handleInputChange,type:"text",className:"form-control",name:"username",required:!0,value:this.state.username})),s.a.createElement("label",{className:"m-2"},"email",s.a.createElement("input",{onChange:this.handleInputChange,type:"email",className:"form-control",name:"email",value:this.state.email})),s.a.createElement("label",{className:"m-2"},"text",s.a.createElement("input",{onChange:this.handleInputChange,type:"text",className:"form-control",name:"text",required:!0,value:this.state.text})),s.a.createElement("button",{className:"btn btn-primary"},"Create")))}}]),t}(n.Component),y={username:"",password:""},N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state=Object(l.a)({},y),a.handleInputChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(o.a)({},t,n))},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.username||""!==a.state.password){var t=a.state,n=t.username,s=t.password;a.props.userLogin({username:n,password:s}),a.setState(Object(l.a)({},y))}},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{"aria-label":"breadcrumb"},""!==this.props.isLogged?s.a.createElement("p",{className:"breadcrumb d-flex justify-content-end"},"You logged in"):s.a.createElement("form",{onSubmit:this.handleSubmit,className:"breadcrumb d-flex justify-content-end"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"m-2"},"username",s.a.createElement("input",{onChange:this.handleInputChange,type:"text",className:"form-control",name:"username",value:this.state.username})),s.a.createElement("label",{className:"m-2"},"password",s.a.createElement("input",{onChange:this.handleInputChange,type:"password",className:"form-control",name:"password",value:this.state.password})),s.a.createElement("button",{className:"btn btn-primary"},"Login"))))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={tasks:[],total_task_count:null,page:1,sort_field:"id",sort_direction:"asc",token:""},a.getData=function(){var e="https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=Vitalii&page=".concat(a.state.page,"&sort_field=").concat(a.state.sort_field,"&sort_direction=").concat(a.state.sort_direction);g.a.get(e).then((function(e){a.setState({tasks:e.data.message.tasks})}))},a.pickPage=function(e){g.a.get("https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=Vitalii&page=".concat(e)).then((function(t){a.setState({tasks:t.data.message.tasks,page:e})}))},a.changeSelect=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(o.a)({},t,n)),a.getData()},a.createNewTask=function(e){var t=new FormData;t.append("username",e.username),t.append("email",e.email),t.append("text",e.text),g.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/create?developer=Vitalii",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.status;e.data;200===t&&a.getData()}))},a.userLogin=function(e){var t=new FormData;t.append("username",e.username),t.append("password",e.password),g.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/login?developer=Vitalii",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.status,n=e.data;200===t&&a.setState({token:n.message.token})}))},a.updateTask=function(e){var t=e.status,n=e.text,s=e.id,r=a.state.tasks.find((function(e){return e.id===s})),c=Object(l.a)({},r,{text:n,status:t}),o=new FormData;o.append("token",a.state.token),o.append("text ",c.text),o.append("status ",c.status),g.a.post("https://uxcandy.com/~shapoval/test-task-backend/v2/edit/".concat(c.id,"?developer=Vitalii"),o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.status;200===t&&console.log(t)}))},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=Vitalii").then((function(t){e.setState({tasks:t.data.message.tasks,total_task_count:Number(t.data.message.total_task_count)})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(N,{isLogged:this.state.token,userLogin:this.userLogin}),s.a.createElement("h1",{className:"text-center"},"Tasks App"),s.a.createElement(E,{createNewTask:this.createNewTask})),s.a.createElement("div",{className:"col-3 offset-9"},s.a.createElement("label",{className:"d-flex"}," sort_field",s.a.createElement("select",{className:"form-control form-control-sm ml-2",value:this.state.sort_field,name:"sort_field",onChange:this.changeSelect},s.a.createElement("option",{value:"id"},"id"),s.a.createElement("option",{value:"username"},"username"),s.a.createElement("option",{value:"email"},"email"),s.a.createElement("option",{value:"status"},"status")))),s.a.createElement("div",{className:"col-3 offset-9"},s.a.createElement("label",{className:"d-flex"}," sort_direction",s.a.createElement("select",{className:"form-control form-control-sm ml-2",value:this.state.sort_direction,name:"sort_direction",onChange:this.changeSelect},s.a.createElement("option",{value:"asc"},"asc"),s.a.createElement("option",{value:"desc"},"desc")))),s.a.createElement("div",{className:"col-12"},s.a.createElement(v,{tasks:this.state.tasks,isLogged:this.state.token,updateTask:this.updateTask}),s.a.createElement(b,{total_task_count:this.state.total_task_count,page:this.state.page,pickPage:this.pickPage}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e8dc614f.chunk.js.map